{"is_source_file": true, "format": "Python", "description": "This is a FastAPI-based server script implementing backend REST APIs for a patient portal, including health checks, user authentication, patient data management, and chatbot interaction. It defines models, dependencies, and route handlers, and manages in-memory data for demo purposes.", "external_files": ["fastapi", "fastapi.middleware.cors", "fastapi.security", "pydantic", "starlette.responses", "os", "logging"], "external_methods": ["os.getenv", "BaseModel.model_dump", "Header", "Depends", "status.HTTP_401_UNAUTHORIZED", "status.HTTP_204_NO_CONTENT"], "published": ["app", "get_env", "get_db_url", "get_current_username"], "classes": [{"name": "AppSettings", "description": "Model for application configuration loaded from environment variables."}, {"name": "TokenResponse", "description": "Response model containing access token details."}, {"name": "UserProfile", "description": "Basic user profile with username and email."}, {"name": "AuthSuccess", "description": "Model representing successful authentication response, including token and profile."}, {"name": "AuthStatus", "description": "Model indicating whether a user is authenticated."}, {"name": "PatientCreate", "description": "Model for creating a new patient record."}, {"name": "Patient", "description": "Representation of patient data."}, {"name": "PatientUpdate", "description": "Model for updating existing patient data."}, {"name": "ChatRequest", "description": "Input model for chatbot message requests."}, {"name": "ChatResponse", "description": "Response model for chatbot replies."}], "methods": [{"name": "health_check()", "description": "Performs a simple health check of the API service.", "scope": "", "scopeKind": ""}, {"name": "login(form_data: OAuth2PasswordRequestForm = Depends())", "description": "Authenticates a user and returns a token and profile.", "scope": "", "scopeKind": ""}, {"name": "auth_status(authorization: Optional[str] = Header(default=None))", "description": "Checks if the provided token is valid.", "scope": "", "scopeKind": ""}, {"name": "list_patients(username: str = Depends(get_current_username))", "description": "Returns a list of all patients from in-memory storage.", "scope": "", "scopeKind": ""}, {"name": "create_patient(payload: PatientCreate, username: str = Depends(get_current_username))", "description": "Creates a new patient record.", "scope": "", "scopeKind": ""}, {"name": "get_patient(patient_id: str, username: str = Depends(get_current_username))", "description": "Retrieves a patient record by ID.", "scope": "", "scopeKind": ""}, {"name": "update_patient(patient_id: str, payload: PatientUpdate, username: str = Depends(get_current_username))", "description": "Updates an existing patient record.", "scope": "", "scopeKind": ""}, {"name": "delete_patient(patient_id: str, username: str = Depends(get_current_username))", "description": "Deletes a patient record.", "scope": "", "scopeKind": ""}, {"name": "chatbot_send(payload: ChatRequest, username: str = Depends(get_current_username))", "description": "Generates a chatbot reply to a message, using Gemini integration if configured.", "scope": "", "scopeKind": ""}, {"name": "_ensure_demo_data()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str _fake_gemini_reply(message: str)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str get_current_username(authorization: Optional[str] = Header(default=None))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] get_db_url()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[str] get_env(name: str, default: Optional[str] = None)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["os.getenv", "get_env", "BaseModel.model_dump", "get_current_username", "_ensure_demo_data", "_fake_gemini_reply"], "search-terms": ["FastAPI", "patient_routes", "Chatbot", "auth", "environment variables", "in-memory data", "OAuth2PasswordRequestForm", "Gemini"], "state": 2, "file_id": 3, "knowledge_revision": 10, "git_revision": "15129cb46c0aa1adaf1ff8af6d6209f56a796f3b", "revision_history": [{"9": "15129cb46c0aa1adaf1ff8af6d6209f56a796f3b"}, {"10": "15129cb46c0aa1adaf1ff8af6d6209f56a796f3b"}], "ctags": [{"_type": "tag", "name": "AppSettings", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^class AppSettings(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AuthStatus", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^class AuthStatus(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "AuthSuccess", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^class AuthSuccess(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ChatRequest", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^class ChatRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "ChatResponse", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^class ChatResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Patient", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^class Patient(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PatientCreate", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^class PatientCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PatientUpdate", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^class PatientUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TokenResponse", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^class TokenResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserProfile", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^class UserProfile(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_FAKE_TOKENS", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^_FAKE_TOKENS: Dict[str, str] = {}  # token -> username$/", "language": "Python", "typeref": "typename:Dict[str, str]", "kind": "variable"}, {"_type": "tag", "name": "_INMEMORY_PATIENTS", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^_INMEMORY_PATIENTS: Dict[str, Dict[str, Any]] = {}$/", "language": "Python", "typeref": "typename:Dict[str, Dict[str, Any]]", "kind": "variable"}, {"_type": "tag", "name": "_ensure_demo_data", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def _ensure_demo_data():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_fake_gemini_reply", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def _fake_gemini_reply(message: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(message: str)"}, {"_type": "tag", "name": "access_token", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    access_token: str = Field(..., description=\"Access token to authorize subsequent requests.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "age", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    age: Optional[int] = Field(None, description=\"Patient age in years\", ge=0)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "age", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    age: Optional[int] = Field(None, description=\"Patient age in years\", ge=0)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "PatientCreate", "scopeKind": "class"}, {"_type": "tag", "name": "age", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    age: Optional[int] = Field(None, description=\"Patient age in years\", ge=0)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "PatientUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app_name", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    app_name: str = \"Patient 360 Backend\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AppSettings", "scopeKind": "class"}, {"_type": "tag", "name": "app_version", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    app_version: str = \"0.1.0\"$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "AppSettings", "scopeKind": "class"}, {"_type": "tag", "name": "auth_status", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def auth_status(authorization: Optional[str] = Header(default=None)):$/", "language": "Python", "kind": "function", "signature": "(authorization: Optional[str] = Header(default=None))"}, {"_type": "tag", "name": "authenticated", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    authenticated: bool = Field(..., description=\"Indicates whether the token is valid.\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "AuthStatus", "scopeKind": "class"}, {"_type": "tag", "name": "backend_db_url", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    backend_db_url: Optional[str] = Field(default_factory=lambda: get_env(\"BACKEND_DB_URL\"))$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "AppSettings", "scopeKind": "class"}, {"_type": "tag", "name": "chatbot_send", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def chatbot_send(payload: ChatRequest, username: str = Depends(get_current_username)):$/", "language": "Python", "kind": "function", "signature": "(payload: ChatRequest, username: str = Depends(get_current_username))"}, {"_type": "tag", "name": "conditions", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    conditions: List[str] = Field(default_factory=list, description=\"Known medical conditions\")$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "conditions", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    conditions: List[str] = Field(default_factory=list, description=\"Known medical conditions\")$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "PatientCreate", "scopeKind": "class"}, {"_type": "tag", "name": "conditions", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    conditions: Optional[List[str]] = Field(None, description=\"Known medical conditions\")$/", "language": "Python", "typeref": "typename:Optional[List[str]]", "kind": "variable", "scope": "PatientUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    context: Optional[Dict[str, Any]] = Field(default=None, description=\"Optional context for th/", "language": "Python", "typeref": "typename:Optional[Dict[str, Any]]", "kind": "variable", "scope": "ChatRequest", "scopeKind": "class"}, {"_type": "tag", "name": "create_patient", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def create_patient(payload: PatientCreate, username: str = Depends(get_current_username)):$/", "language": "Python", "kind": "function", "signature": "(payload: PatientCreate, username: str = Depends(get_current_username))"}, {"_type": "tag", "name": "delete_patient", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def delete_patient(patient_id: str, username: str = Depends(get_current_username)):$/", "language": "Python", "kind": "function", "signature": "(patient_id: str, username: str = Depends(get_current_username))"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    email: EmailStr = Field(..., description=\"Email for the user.\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "UserProfile", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    email: EmailStr = Field(..., description=\"Patient contact email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    email: EmailStr = Field(..., description=\"Patient contact email\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "PatientCreate", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    email: Optional[EmailStr] = Field(None, description=\"Patient contact email\")$/", "language": "Python", "typeref": "typename:Optional[EmailStr]", "kind": "variable", "scope": "PatientUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "first_name", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    first_name: Optional[str] = Field(None, description=\"Patient first name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "PatientUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "first_name", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    first_name: str = Field(..., description=\"Patient first name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "first_name", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    first_name: str = Field(..., description=\"Patient first name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "PatientCreate", "scopeKind": "class"}, {"_type": "tag", "name": "gemini_api_key", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    gemini_api_key: Optional[str] = Field(default_factory=lambda: get_env(\"GEMINI_API_KEY\"))$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "AppSettings", "scopeKind": "class"}, {"_type": "tag", "name": "gemini_model", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    gemini_model: Optional[str] = Field(default_factory=lambda: get_env(\"GEMINI_MODEL\", \"gemini-/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "AppSettings", "scopeKind": "class"}, {"_type": "tag", "name": "get_current_username", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def get_current_username(authorization: Optional[str] = Header(default=None)) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(authorization: Optional[str] = Header(default=None))"}, {"_type": "tag", "name": "get_db_url", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def get_db_url() -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_env", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def get_env(name: str, default: Optional[str] = None) -> Optional[str]:$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "function", "signature": "(name: str, default: Optional[str] = None)"}, {"_type": "tag", "name": "get_patient", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def get_patient(patient_id: str, username: str = Depends(get_current_username)):$/", "language": "Python", "kind": "function", "signature": "(patient_id: str, username: str = Depends(get_current_username))"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Patient unique identifier\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "last_name", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    last_name: Optional[str] = Field(None, description=\"Patient last name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "PatientUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "last_name", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    last_name: str = Field(..., description=\"Patient last name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Patient", "scopeKind": "class"}, {"_type": "tag", "name": "last_name", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    last_name: str = Field(..., description=\"Patient last name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "PatientCreate", "scopeKind": "class"}, {"_type": "tag", "name": "list_patients", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def list_patients(username: str = Depends(get_current_username)):$/", "language": "Python", "kind": "function", "signature": "(username: str = Depends(get_current_username))"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def login(form_data: OAuth2PasswordRequestForm = Depends()):$/", "language": "Python", "kind": "function", "signature": "(form_data: OAuth2PasswordRequestForm = Depends())"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    message: str = Field(..., description=\"Message from the user to the chatbot.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatRequest", "scopeKind": "class"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    model: str = Field(..., description=\"Gemini model used to generate the reply.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatResponse", "scopeKind": "class"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "profile", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    profile: UserProfile = Field(..., description=\"Basic user profile for the authenticated user/", "language": "Python", "typeref": "typename:UserProfile", "kind": "variable", "scope": "AuthSuccess", "scopeKind": "class"}, {"_type": "tag", "name": "reply", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    reply: str = Field(..., description=\"Chatbot reply to the message.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "ChatResponse", "scopeKind": "class"}, {"_type": "tag", "name": "settings", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^settings = AppSettings()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    token: TokenResponse = Field(..., description=\"Authentication token response.\")$/", "language": "Python", "typeref": "typename:TokenResponse", "kind": "variable", "scope": "AuthSuccess", "scopeKind": "class"}, {"_type": "tag", "name": "token_type", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    token_type: str = Field(default=\"bearer\", description=\"Token type (bearer).\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "update_patient", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^def update_patient(patient_id: str, payload: PatientUpdate, username: str = Depends(get_current_/", "language": "Python", "kind": "function", "signature": "(patient_id: str, payload: PatientUpdate, username: str = Depends(get_current_username))"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    username: Optional[str] = Field(None, description=\"Username tied to the token.\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "AuthStatus", "scopeKind": "class"}, {"_type": "tag", "name": "username", "path": "/home/kavia/workspace/code-generation/patient-360-dashboard-6122-6131/patient_portal_backend/src/api/main.py", "pattern": "/^    username: str = Field(..., description=\"Unique username of the user.\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "UserProfile", "scopeKind": "class"}], "hash": "b6a0234a9975dbfc919f9fe5da39c42d", "format-version": 4, "code-base-name": "patient_portal_backend", "filename": "patient_portal_backend/src/api/main.py", "fields": [{"name": "Dict[str, str] _FAKE_TOKENS", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Dict[str, Dict[str, Any]] _INMEMORY_PATIENTS", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str access_token", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[int] age", "scope": "Patient", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str app_name", "scope": "AppSettings", "scopeKind": "class", "description": "unavailable"}, {"name": "str app_version", "scope": "AppSettings", "scopeKind": "class", "description": "unavailable"}, {"name": "bool authenticated", "scope": "AuthStatus", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] backend_db_url", "scope": "AppSettings", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] conditions", "scope": "Patient", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[List[str]] conditions", "scope": "PatientUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[Dict[str, Any]] context", "scope": "ChatRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "EmailStr email", "scope": "UserProfile", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[EmailStr] email", "scope": "PatientUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] first_name", "scope": "PatientUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str first_name", "scope": "Patient", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] gemini_api_key", "scope": "AppSettings", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] gemini_model", "scope": "AppSettings", "scopeKind": "class", "description": "unavailable"}, {"name": "str id", "scope": "Patient", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] last_name", "scope": "PatientUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str last_name", "scope": "Patient", "scopeKind": "class", "description": "unavailable"}, {"name": "str message", "scope": "ChatRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str model", "scope": "ChatResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "UserProfile profile", "scope": "AuthSuccess", "scopeKind": "class", "description": "unavailable"}, {"name": "str reply", "scope": "ChatResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "settings = AppSettings()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TokenResponse token", "scope": "AuthSuccess", "scopeKind": "class", "description": "unavailable"}, {"name": "str token_type", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] username", "scope": "AuthStatus", "scopeKind": "class", "description": "unavailable"}, {"name": "str username", "scope": "UserProfile", "scopeKind": "class", "description": "unavailable"}]}